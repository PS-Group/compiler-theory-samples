# Финальные улучшения в интерпретаторе

Интерпретатор по-прежнему читает ввод построчно, строит AST и с его помощью выполняет инструкции.

С предыдущей итерации поддерживаются переменные, присваивания, печать выражений, управляющие инструкции `if`, `if .. else`, `while`, `do .. while`, пользовательские и встроенные функции, инструкция `return` и вызов функции, смена области видимости переменных внутри функции, типы данных Boolean, Number, String и специальный тип данных Error для обработки ошибок вычислений.

В данном примере добавлены финальные улучшения:
- унарный логический оператор "!"
- бинарные логические операторы "&&", "||"
- конструкция print теперь принимает список выражений, разделённый запятыми

### Изменения в сравнении с lemon-8-types

Новые классы:

- CValue реализует значение, тип которого определяется динамически, но принадлежит диапазону типов `String, Number, Boolean, Error`.
- Обработка ошибок времени выполнения, в том числе проверка аргументов функций, претерпела сильные изменения
- В классе `CBatchParser` появился метод `GetStringLiteral` для получения значения литерала по ID строки в объекте класса `CStringPool`.

Новые правила в грамматике:

- оператор коньюнкции: `expression(X) ::= expression(A) AND expression(B).`
- оператор дизьюнкции: `expression(X) ::= expression(A) OR expression(B).`
- оператор отрицания: `expression(X) ::= NOT expression(A).`
- изменено правило для print: `statement(X) ::= PRINT expression_list(A).`
- булево `true` или `false` как выражение: `expression(X) ::= BOOL(A).`
- приоритет логических операторов лежит между операторами сравнения и сложения/вычитания:
```
%left LESS EQUALS.
%left AND OR NOT
%left PLUS MINUS.
%left STAR SLASH PERCENT.
```

### Системные требования

- Для ОС Ubuntu: установите пакет `lemon`
- Для ОС Windows: соберите Lemon из [исходных кодов (hwaci.com)](http://www.hwaci.com/sw/lemon/). Исходники Lemon состоят всего из двух файлов, `lemon.c` и `lempar.c`. Используйте любой современный компилятор C/C++.
